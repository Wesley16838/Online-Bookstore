
<nav style="background-color:#000; z-index: 9999">
        <div class="left">
                <a href="../../homepage" ><img id="logo" src="../../public/assets/logo200.png" alt="Logo" ></a>
               <form action="/book/search" method="GET">
                        <div class="form-group has-feedback has-search" style="margin-bottom:0px">
                                <label for="keyword" style="display:none;"></label>
                                <input type="search" id="keyword" name="keyword" class="form-control" placeholder="Search">
                              <span style="top: 0px;" class="glyphicon glyphicon-search form-control-feedback"></span>
                        </div>
                </form>
        </div>

        <div class="right">
                <ul>
                        <li class="cart">
                                <span id="cart">{{cartTotal}}</span><a href="/user/cart/{{userid}}">Cart</a>
                            
                        </li>
                        <li>
                                <a href="#"><span id="username">Hi {{firstName}}</span>Account</a>
                                <ul class="dropdown">
                                        <li><a href="#">My account</a></li>
                                        <li><a href="../../../" onclick="delete_cookie()">Log out</a></li>
                                            {{!-- <li><button onclick="delete_cookie()">Log Out</button></li> --}}
                                </ul>
                        </li>

                </ul>
        </div>
</nav>
<div class="dashboard">
     <div class="tab">
        <button class="tablinks" onclick="openCity(event, 'Account')" id="defaultOpen">Account</button>
        <button class="tablinks" onclick="openCity(event, 'Address')" >Address</button>
        <button class="tablinks" onclick="openCity(event, 'Payment')">Payment</button>
        <button class="tablinks" onclick="openCity(event, 'Order')">Track order</button>
    </div>
    <div id="Account" class="tabcontent">
        <h1 style="font-weight:bold">Account Information</h1>
        <div class="profile">
            <ul>
                <li>First Name : {{firstName}}</li>
                <li>Last Name : {{lastName}}</li>
                <li>Phone Number : {{phonenumber}}</li>
                <li>Email : {{email}}</li>
                <li>
                     <h1>Address</h1>
                    <div class="addresses">
                        {{#each addresses}}  
                            <div class="user-address">
                                    <p>{{address}}</p>
                                    <p>{{city}}</p>
                                    <p>{{state}}</p>
                                    <p>{{zip}}</p>
                                    <p>{{country}}</p>
                            </div>  
                        {{/each}}  
                    </div>
                   
                </li>
                <li>
                    <h1>Payment Method</h1>
                    <div class="addresses">
                        {{#each payment}}  
                            <div class="user-address">
                                <p>Visa end in {{cardNumber}}</p>
                                <p>Card User: {{username}}</p>
                            </div>
                        {{/each}}  
                    </div>
                    
                </li>
                
            </ul>
            
        </div>
    </div>
    <div id="Address" class="tabcontent">
        <h1 style="font-weight:bold">Address</h1>
            <form action="/user/update/address" class="server-form" method="post" id="static-form" onsubmit="return validateForm()">
                <div class="form-group half-form">
                    <label for="address" style="font-weight: normal;">Address</label>
                    <input type="text" class="form-control" id="address" name="address" placeholder="Address" value="{{address}}" required>
                </div>
                <div class="form-group half-form">
                    <label for="city" style="font-weight: normal;">City</label>
                    <input type="text" class="form-control" id="city" name="city" placeholder="City" value="{{city}}" required>
                </div>
                <div class="form-group half-form">
                    <label for="state" style="font-weight: normal;">State</label>
                    <select id="state" class="form-control" name="state">
                            <option value="">Select States...</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="DC">District Of Columbia</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                   </select>
                </div>
                <div class="form-group half-form">
                    <label for="zip" style="font-weight: normal;">Zip</label>
                    <input type="text" class="form-control" id="zip" name="zip" placeholder="Zip" value="{{zip}}" required>
                </div>
               
                <div class="form-group half-form">
                    <label for="country" style="font-weight: normal;">Country</label>
                   <select id="country" class="form-control" name="country">
                            <option value="United States">United States</option>
                   </select>
                </div>
               
            
                {{#if hasErrors }}
                <div class="form-group">
                    <div class="alert alert-danger">
                    {{ error }}
                    </div>
                </div>
                {{/if}}
                <div class="form-group half-form" style="width: 100%;text-align: center;">
                    <button type="submit" class="btn_signup">Create</button>
                </div>
                
            </form>
    </div>

    <div id="Payment" class="tabcontent">
        <h1 style="font-weight:bold">Payment method</h1>
        <form action="/user/update/payment" class="server-form" method="post" id="static-form1" onsubmit="return validateForm1()">
                <div class="form-group half-form">
                    <label for="cardnumber" style="font-weight: normal;">Card Number(Only allow Visa)</label>
                    <input type="text" class="form-control input-card" id="cardnumber" name="cardnumber" placeholder="4●●● ●●●● ●●●● ●●●●" value="{{cardnumber}}" required>
                </div>
                <div class="form-group half-form">
                    <label for="name" style="font-weight: normal;">Name on Card</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Name on card" value="{{name}}" required>
                </div>
              
                <div class="form-group half-form">
                    <label for="expiration" style="font-weight: normal;">Expiration date: </label>
                    <input type="text" class="form-control input-date" id="expiration" name="expiration" placeholder="MM/YY" value="{{expiration}}" required>
                </div>
               
              
               
            
                {{#if hasErrors }}
                <div class="form-group">
                    <div class="alert alert-danger">
                    {{ error }}
                    </div>
                </div>
                {{/if}}
                <div class="form-group half-form" style="width: 100%;text-align: center;">
                    <button type="submit" class="btn_signup">Create</button>
                </div>
                
            </form>
    </div>

    <div id="Order" class="tabcontent">
        <h1 style="font-weight:bold">Track your order</h1>
         {{#each order}}  
                    <div class="user-order">
                            <div class="order-items">
                                 {{#each content}}  
                                <div class="order-item">
                                    <img src="{{id.bookImage}}"  alt="">
                                    <h2>{{id.bookName}}</h2>
                                  
                        
                                </div>
                            {{/each}}  
                            </div>
                           
                            <div class="order-info">
                                <p>Address : <span>{{address}}</span></p>
                                <p>Payment : <span>{{payment}}</span></p>
                                <p>Date : <span>{{date}}</span></p>
                                <button onclick=remove("{{_id}}")>Remove</button>
                            </div>
                           
                    </div>
                           
         {{/each}}  
    </div>
</div>
   

       
  
       

<script>
   var cleave = new Cleave('.input-card', {
    creditCard: true,
    onCreditCardTypeChanged: function (type) {
        // update UI ...
    }
});
var cleave1 = new Cleave('.input-date', {
    date: true,
    datePattern: ['m', 'y']
});
 function remove(id) {
   
       $.ajax({
            url: '../../user/order/delete/'+id,
            type: 'DELETE',
            success: function(result) {
                 location.reload();  
            }
        });
       
}
function validateForm() {
  var x = document.forms["static-form"]["address"].value;
  var y = document.forms["static-form"]["city"].value;
  var z = document.forms["static-form"]["zip"].value;
  var format_name = /[!@$%^&*()_+\=\[\]{};':"\\|.<>\/?]/;
  
  if (format_name.test(x) || format_name.test(y) || format_name.test(z)) {
    alert("Don't contain special characters like !@$%^&*()_+\=\[\]{};':\"\\|.<>\/? in Card Number");
    return false;
  }
}

function validateForm1() {
  var x = document.forms["static-form1"]["cardnumber"].value;
  var y = document.forms["static-form1"]["name"].value;
  console.log(x)
  var str = x.replace(/\s/g, '');
   console.log(str)
    if ( str.length !=16 ) {
    alert(str.length);
    return false;
  }
  var format_name = /[!@$%^&*()_+\=\[\]{};':"\\|.<>\/?]/;
  var format_num = /[\d]/;
  if (format_name.test(y)) {
    alert("Don't contain special characters like !@$%^&*()_+\=\[\]{};':\"\\|.<>\/? or number in Name of Card");
    return false;
  }
}

    function delete_cookie() {
        document.cookie = "token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        document.cookie = "userid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        alert('You have been logged out!')
        window.location = "../../../";
        
    }
    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();

</script>